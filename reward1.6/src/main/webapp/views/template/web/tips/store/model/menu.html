<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title>众赏</title>
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<link rel="stylesheet" href="${basepath}/assets/plugin/mui/dist/css/mui.min.css">
		<link rel="stylesheet" href="${basepath}/assets/def/css/tips.css">
		<style>
			.mui-bar-popover {
				width: 30%;
			}
			.mui-popover-arrow {
/* 				display:none; */
				
			}
			
			.mui-popover .mui-popover-arrow:after{
				    background: #EA4F16;
			}
			.mui-popover .mui-table-view {
			    background-color: #EA4F16;	
			    color: #fff;		
			}
			
			.mui-popover {
    			background-color: #EA4F16;
    		}
    		
    		
		</style>
	</head>

	<body>
		<nav class="mui-bar mui-bar-tab store-menu" style="z-index:9999999999">
			<a class="mui-tab-item" href="javascript:void(0)" id="dynamic" data-menu="dynamic">
				<span class="mui-icon iconfont icon-time-after" data-class="icon-time"></span>
				<span class="mui-tab-label">动态</span>
			</a>
			<a class="mui-tab-item" href="javascript:void(0)" id="range" data-menu="range">
				<span class="mui-icon iconfont icon-range" data-class="icon-range"></span>
				<span class="mui-tab-label">排行</span>
			</a>
			<a class="mui-tab-item" href="javascript:void(0)" id="statistics" data-menu="statistics">
				<span class="mui-icon iconfont icon-serverteen" data-class="icon-serverteen"></span>
				<span class="mui-tab-label">统计</span>
			</a>
			<a class="mui-tab-item" href="#setting_menu" data-id="setting_menu" data-menu="setting_menu">
				<span class="mui-icon iconfont icon-setting" data-class="icon-setting"></span>
				<span class="mui-tab-label">设置</span>
			</a>
		</nav>
		<div id="setting_menu" class="mui-popover mui-bar-popover  store-menu">
			<div class="mui-popover-arrow"></div>
			<ul class="mui-table-view">
				<li class="mui-table-view-cell"><a href="javascript:void(0)" id="storeinfo"  data-group="setting_menu">店铺信息</a>
				</li>
				<li class="mui-table-view-cell"><a href="javascript:void(0)" id="allot" data-group="setting_menu">赏金分配</a>
				</li>
				<li class="mui-table-view-cell"><a href="javascript:void(0)" id="empmanager" data-group="setting_menu">人员管理</a>
				</li>
				<li class="mui-table-view-cell isedit-display"><a href="javascript:void(0)" id="qrcode" data-group="setting_menu">二维码管理</a>
				</li>
<!-- 				<li class="mui-table-view-cell"><a href="javascript:void(0)" id="coupon">优惠券管理</a> </li>-->				
			</ul>
		</div>
		<div id="rank_menu" class="mui-popover mui-bar-popover  store-menu">
			<div class="mui-popover-arrow"></div>
			<ul class="mui-table-view" id="template-rankmenu-content">
				<li class="mui-table-view-cell"><a href="javascript:void(0)" id="range_tips" data-group="rank_menu" data-code="1002">小费排行</a>
				</li>
				<li class="mui-table-view-cell"><a href="javascript:void(0)" id="range_evaluate" data-group="rank_menu" data-code="1001">评价排行</a>
				</li>
								
			</ul>
		</div>
		
		
	
		
	</body>
	<script src="${basepath}/assets/plugin/require.js"></script>
	<script type="text/javascript" src="${basepath}/assets/def/js/tips/tips.js"></script>
	<script type="text/template" id="template-rankmenu">
            {{#js_compare "this.value === '1003' "}}
				<script>jQuery("a[data-id='rank_menu']").attr("href","#rank_menu");<\/script>
				
				<li class="mui-table-view-cell"><a href="javascript:void(0)" id="range_tips" data-group="rank_menu" data-code="1002">小费排行</a>
				</li>
                <li class="mui-table-view-cell"><a href="javascript:void(0)" id="range_evaluate" data-group="rank_menu" data-code="1001">评价排行</a>
				</li>	
    		{{else}}	
				<script>jQuery("a[data-id='rank_menu']").attr("href","javascript:void(0)");<\/script>
                {{#js_compare "this.value === '1001' "}}
					<li class="mui-table-view-cell"><a href="javascript:void(0)" id="range_evaluate" data-group="rank_menu" data-code="1001">评价排行</a>
				    </li>
    			{{else}}	
					<li class="mui-table-view-cell"><a href="javascript:void(0)" id="range_tips" data-group="rank_menu" data-code="1002">小费排行</a>
				    </li>	
				{{/js_compare}}
         	{{/js_compare}}
	</script>
	<script type="text/javascript">
	var authFunc=function(){};
	require(["jquery","mui","addr","common","template7"],function($$,mui,addr,tools){
		 if("${loginVo.empId}"!=""){
		 	window.localStorage.setItem("empId", "${loginVo.empId}");
		 }
		 var subPages=[
		               {"id":"allot","url":"${basepath}/views/template/web/tips_store_sub_allot.xhtml","group":"setting_menu"},
		               {"id":"dynamic","url":"${basepath}/views/template/web/tips_store_sub_dynamic.xhtml","group":"dynamic"},
		               {"id":"empmanager","url":"${basepath}/views/template/web/tips_store_sub_empmanager.xhtml","group":"setting_menu"},
// 		               {"id":"range_tips","url":"${basepath}/views/template/web/tips_store_sub_range-tips.xhtml","group":"rank_menu"},
// 		               {"id":"range_evaluate","url":"${basepath}/views/template/web/tips_store_sub_range-evaluate.xhtml","group":"rank_menu"},
					   {"id":"range","url":"${basepath}/views/template/web/tips_store_sub_range.xhtml","group":"range"},
		               {"id":"statistics","url":"${basepath}/views/template/web/tips_store_sub_statistics.xhtml","group":"statistics"},
		               {"id":"storeinfo","url":"${basepath}/views/template/web/tips_store_sub_storeinfo.xhtml","group":"setting_menu"},
		               {"id":"qrcode","url":"${basepath}/views/template/web/tips_store_sub_qrcode.xhtml","group":"setting_menu"},
		               {"id":"coupon","url":"${basepath}/views/template/web/tips_store_sub_coupon.xhtml","group":"setting_menu"}
		              ];
		 //初始化菜单
	     var menuIconCss=function(){
	    	 var cursrc= window.location.href;
	    	 for(var i=0;i<subPages.length;i++){				 
				 if(cursrc.indexOf(subPages[i].url)>-1){
					 var group = subPages[i].group;
					 
					 $$("a[data-menu='"+group+"']").addClass("mui-active");
					 
					 var iconObj = $$("a[data-menu='"+group+"']").find(".mui-icon");
					 var data_class=iconObj.attr("data-class");
					 iconObj.removeClass(data_class).addClass(data_class+"-after");
					 
					 
					 break;
				 }				
				
			 }
	     }();
		 
		 var data_group=0;
		 mui('.store-menu').on('tap','a',function(e) {	
			 //判断选中的图标
			 var _this = this;
			 $$(".mui-tab-item").each(function(){
				 var iconObj=$$(this).find(".mui-icon");
				 var data_class=iconObj.attr("data-class");
				 
				 if($$(_this).html()==$$(this).html() || ("#"+$$(_this).attr("data-group"))==$$(this).attr("href")){
					 iconObj.removeClass(data_class).addClass(data_class+"-after");
				 }else{					 
					 iconObj.removeClass(data_class+"-after").addClass(data_class);
				 }
			 }); 
			
			 //判断是否有二组菜单
			 var id=this.id;
			 if(null==id||id==""){	
				 var data_id=$$(this).attr("data-id");					 
				 id = $$("a[data-group='"+data_id+"']:first").attr("id");
				 if($$("a[data-group='"+data_id+"']").length>1){
					 //同一级菜单不自动进入
					 if(data_id == data_group){
						 return;
					 }
					 //data_group = data_id;
					 return;
				 }
				
			 }else{	
				 //判断点击的内容
				 var group_id = $$(this).attr("data-group");
				 if(group_id != data_group){
					 data_group = 0;
				 }
				 //判断是否有弹出窗口
				 if($$(".mui-bar-backdrop").length !=0){
					 mui('.mui-popover').popover('hide');
				 }
			 }
			 //如果为同一菜单不进行刷新
			 var cursrc=window.location.href;
			 for(var i=0;i<subPages.length;i++){
				 if(subPages[i].id == id){	
					 if(cursrc.indexOf(subPages[i].url)<0){
						 //$$("#mainfrm").attr("src",subPages[i].url);
						 window.location.href = subPages[i].url
					 }					 
					 break;
				 }
			 }
	    });
		
		 
		/* //判断权限
		//显示二级菜单权限
		authFunc=function(){			
			var code = window.localStorage.getItem("authCode");
			console.log(code)
			if(code == null || code == '')return;
			var template = document.getElementById('template-rankmenu').innerHTML;
			var compiled = Template7(template).compile();
			var compiledRendered = compiled({value:code});
			$$("#template-rankmenu-content").html(compiledRendered);
		
		};
		authFunc(); */
		
	});
	
	
	</script>
</html>