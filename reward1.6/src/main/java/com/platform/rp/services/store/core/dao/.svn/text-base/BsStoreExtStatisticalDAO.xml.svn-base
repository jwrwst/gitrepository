<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.platform.rp.services.store.core.dao.BsStoreExtStatisticalDAO">

    <resultMap type="com.platform.rp.services.store.core.dao.entity.BsStoreExtStatisticalEntity" id="storeExtStaEntityMap">
        <result column="id" property="id" />
        <result column="store_id" property="storeId" />
		<result column="shopkeeper_count" property="shopkeeperCount" />
		<result column="shopassistant_count" property="shopassistantCount" />
		<result column="divided_count" property="dividedCount" />
		<result column="update_time" property="updateTime" />
	</resultMap>
	
    <insert id="save" parameterType="com.platform.rp.services.store.core.dao.entity.BsStoreExtStatisticalEntity" useGeneratedKeys="true" keyProperty="id">
        INSERT INTO bs_store_ext_statistical (store_id,shopkeeper_count,shopassistant_count,update_time)
        VALUES (#{storeId}, #{shopkeeperCount}, #{shopassistantCount}, #{updateTime})

    </insert>
    
     <delete id="delete" parameterType="map">
		delete from bs_store_ext_statistical where store_id = #{storeId}
	</delete>
    
     <update id="update" parameterType="com.platform.rp.services.store.core.dao.entity.BsStoreExtStatisticalEntity">
        update bs_store_ext_statistical
        <set>
            <if test="shopkeeperCount != null and shopkeeperCount !=0 ">
                shopkeeper_count = #{shopkeeperCount} + shopkeeper_count,
            </if>
            <if test="shopassistantCount != null and shopassistantCount!=0 ">
                shopassistant_count = #{shopassistantCount} + shopassistant_count,
            </if>
            <if test="dividedCount != null and dividedCount ">
                divided_count =  divided_count + #{dividedCount} ,
            </if>
            <if test="updateTime != null">
                update_time = #{updateTime},
            </if>           
        </set>
        where store_id = #{storeId}
    </update>
    
     <select id="get" resultMap="storeExtStaEntityMap" parameterType="long">
         select * from bs_store_ext_statistical where store_id = #{storeId}       
    </select>
  

</mapper>