<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.platform.rp.services.store.core.dao.BsStoreEmployeeDAO">

    <insert id="save" parameterType="com.platform.rp.services.store.core.dao.entity.BsStoreEmployeeEntity" useGeneratedKeys="true" keyProperty="id">
        INSERT INTO bs_store_employee (store_id,emp_id,status,update_time)
        VALUES (#{storeId}, #{empId}, #{status}, #{updateTime})

    </insert>
    
    
    <delete id="deleteByStoreIdAndEmpId">
		delete from bs_store_employee where store_id = #{storeId} and emp_id = #{empId}
	</delete>
	
    <delete id="delete">
		delete from bs_store_employee where store_id = #{storeId} 
	</delete>
	
    <update id="update" parameterType="com.platform.rp.services.store.core.dao.entity.BsStoreEmployeeEntity">
        update bs_store_employee
        <set>     
			status = #{status},
			update_time = now()	
        </set>
        where store_id = #{storeId}
    </update>
    
    <select id="getEmpListByStoreId"  resultType="com.platform.rp.services.store.core.dao.entity.BsStoreEmployeeEntity" parameterType="long">
        select a.emp_id empId,b.name empName,b.nickname empNickName,b.head_pic headPic,'店长' jobTitle from bs_store_employee a,bs_employee_info b where a.emp_id = b.emp_id and a.store_id = #{storeId} and status =1
    </select>
    

</mapper>